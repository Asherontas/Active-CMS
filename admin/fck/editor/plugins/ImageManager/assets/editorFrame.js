/**
 * Javascript used by the editorFrame.php, it basically initializes the frame.
 * @author $Author: Wei Zhuo $
 * @author $Author: Paul Moers <mail@saulmade.nl> $ - watermarking and replace code + several small enhancements <http://www.saulmade.nl/FCKeditor/FCKPlugins.php>
 * @version $Id: editorFrame.js 26 2004-03-31 02:35:21Z Wei Zhuo $
 * @package ImageManager
 */
var topDoc=window.top.document;var t_cx=topDoc.getElementById("cx");var t_cy=topDoc.getElementById("cy");var t_cw=topDoc.getElementById("cw");var t_ch=topDoc.getElementById("ch");var m_sx=topDoc.getElementById("sx");var m_sy=topDoc.getElementById("sy");var m_w=topDoc.getElementById("mw");var m_h=topDoc.getElementById("mh");var m_a=topDoc.getElementById("ma");var m_d=topDoc.getElementById("md");var s_sw=topDoc.getElementById("sw");var s_sh=topDoc.getElementById("sh");var r_ra=topDoc.getElementById("ra");var pattern="img/2x2.gif";function doSubmit(d){var l=parent.document.getElementById("buttons");l.style.display="none";var g=parent.document.getElementById("tools_"+d);g.style.display="none";if(d=="watermark"){parent.showMessage("watermarking");var k=dd.elements.floater.x-dd.elements.background.x;var j=dd.elements.floater.y-dd.elements.background.y;var i=parseInt(topDoc.getElementById("sliderfieldwatermark").value);var o=topDoc.getElementById("watermark_file").options[topDoc.getElementById("watermark_file").selectedIndex].getAttribute("fullPath");var b="editorFrame.php?img="+currentImageFile+"&action=watermark&opacity="+i+"&watermarkFullPath="+o+"&watermarkX="+k+"&watermarkY="+j;location.href=b}else{if(d=="crop"){parent.showMessage("cropping");var b="editorFrame.php?img="+currentImageFile+"&action=crop&params="+parseInt(t_cx.value)+","+parseInt(t_cy.value)+","+parseInt(t_cw.value)+","+parseInt(t_ch.value);location.href=b}else{if(d=="scale"){parent.showMessage("scaling");var b="editorFrame.php?img="+currentImageFile+"&action=scale&params="+parseInt(s_sw.value)+","+parseInt(s_sh.value);location.href=b}else{if(d=="rotate"){parent.showMessage("rotating");var f=topDoc.getElementById("flip");if(f.value=="hoz"||f.value=="ver"){location.href="editorFrame.php?img="+currentImageFile+"&action=flip&params="+f.value}else{if(isNaN(parseFloat(r_ra.value))==false){location.href="editorFrame.php?img="+currentImageFile+"&action=rotate&params="+parseFloat(r_ra.value)}}}else{if(d=="save"){parent.showMessage("saving");var c=topDoc.getElementById("save_filename");var h=topDoc.getElementById("save_format");var e=topDoc.getElementById("sliderfieldsave");var m=h.value.split(",");if(c.value.length<=0){alert(i18n("Please enter a filename to save."))}else{var a=encodeURI(c.value);var n=parseInt(e.value);var b="editorFrame.php?img="+currentImageFile+"&action=save&params="+m[0]+","+n+"&file="+a;location.href=b}}}}}}}function addEvent(d,c,a){if(d.addEventListener){d.addEventListener(c,a,true);return true}else{if(d.attachEvent){var b=d.attachEvent("on"+c,a);return b}else{return false}}}var jg_doc;function init(){jg_doc=new jsGraphics("imgCanvas");jg_doc.setColor("#000000");initEditor()}addEvent(window,"load",init);