/**
 * Functions for the ImageManager, used by manager.php only	
 * @author $Author: Wei Zhuo $
 * @version $Id: manager.js 26 2004-03-31 02:35:21Z Wei Zhuo $
 * @package ImageManager
*/
function i18n(a){if(I18N){return(I18N[a]||a)}else{return a}}function setAlign(c){var b=document.getElementById("f_align");for(var a=0;a<b.length;a++){if(b.options[a].value==c){b.selectedIndex=a;break}}}init=function(){__dlg_init();if(I18N){__dlg_translate(I18N)}var a=document.getElementById("uploadForm");if(a){a.target="imgManager"}var b=window.dialogArguments;if(b){b.f_url=stripBaseURL(b.f_url);if(b.f_url.indexOf("/")!=0){b.f_url="/"+b.f_url}document.getElementById("f_url").value=b.f_url;document.getElementById("f_alt").value=b.f_alt;document.getElementById("f_border").value=b.f_border;document.getElementById("f_vert").value=b.f_vert;document.getElementById("f_horiz").value=b.f_horiz;document.getElementById("f_width").value=b.f_width;document.getElementById("f_height").value=b.f_height;setAlign(b.f_align)}document.getElementById("f_url").focus()};function stripBaseURL(a){if(base_url.indexOf("://")==-1){a=a.replace("https://"+server_name,"");a=a.replace("http://"+server_name,"")}a=a.replace(base_url,"");return a}function onCancel(){__dlg_close(null);return false}function onOK(){var a=["f_url","f_alt","f_align","f_border","f_horiz","f_vert","f_height","f_width","f_file"];var d=new Object();for(var b in a){var e=a[b];var c=document.getElementById(e);if(e=="f_url"&&c.value.indexOf("://")<0){d[e]=makeURL(base_url,c.value)}else{d[e]=c.value}}__dlg_close(d);return false}function makeURL(b,a){if(b.substring(b.length-1)!="/"){b+="/"}if(a.charAt(0)=="/"){}a=a.substring(1);return b+a}function updateDir(a){var b=a.options[a.selectedIndex].value;changeDir(b)}function goUpDir(){var d=document.getElementById("dirPath");var g=d.options[d.selectedIndex].text;if(g.length<2){return false}var f=g.split("/");var c="";for(var b=0;b<f.length-2;b++){c+=f[b]+"/"}for(var b=0;b<d.length;b++){var a=d.options[b].text;if(a==c){d.selectedIndex=b;var e=d.options[b].value;changeDir(e);break}}}function changeDir(a){if(typeof imgManager!="undefined"){imgManager.changeDir(a)}}function toggleConstrains(b){var a=document.getElementById("imgLock");var b=document.getElementById("constrain_prop");if(b.checked){a.src="img/locked.gif";checkConstrains("width")}else{a.src="img/unlocked.gif"}}function checkConstrains(d){var c=document.getElementById("constrain_prop");if(c.checked){var e=document.getElementById("orginal_width");var b=parseInt(e.value);var e=document.getElementById("orginal_height");var f=parseInt(e.value);var g=document.getElementById("f_width");var h=document.getElementById("f_height");var a=parseInt(g.value);var i=parseInt(h.value);if(b>0&&f>0){if(d=="width"&&a>0){h.value=parseInt((a/b)*f)}if(d=="height"&&i>0){g.value=parseInt((i/f)*b)}}}}function showMessage(a){var c=document.getElementById("message");var b=document.getElementById("messages");if(c.firstChild){c.removeChild(c.firstChild)}c.appendChild(document.createTextNode(i18n(a)));b.style.display="block"}function addEvent(d,c,a){if(d.addEventListener){d.addEventListener(c,a,true);return true}else{if(d.attachEvent){var b=d.attachEvent("on"+c,a);return b}else{return false}}}function doUpload(){var a=document.getElementById("uploadForm");if(a){showMessage("Uploading")}}function refresh(){var a=document.getElementById("dirPath");updateDir(a)}function newFolder(){var b=document.getElementById("dirPath");var a=b.options[b.selectedIndex].value;Dialog("newFolder.html",function(d){if(!d){return false}else{var c=d.f_foldername;if(c==thumbdir){alert(i18n("Invalid folder name, please choose another folder name."));return false}if(c&&c!=""&&typeof imgManager!="undefined"){imgManager.newFolder(a,encodeURI(c))}}},null)}addEvent(window,"load",init);